/* =========================================
   1. 全局设置 & 变量定义 (新配色：米咖色/杂志风)
   ========================================= */
/* 引入新字体：Noto Serif (衬线体-用于标题) 和 Noto Sans (无衬线-用于正文) */
@import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@500;700&family=Noto+Sans+SC:wght@400;500&family=Dancing+Script:wght@600&display=swap');

:root {
    /* --- 浅色模式 (日间：米白+咖啡色) --- */
    --primary-color: #a68a64;       /* 主色调：浅咖色/卡其色 */
    --secondary-color: #c0a080;     /* 辅色调：拿铁色 */
    
    --bg-color: #fdfbf7;            /* 背景：米纸色 (比纯白更护眼) */
    --card-bg: #ffffff;             /* 卡片：纯白 */
    --nav-bg: rgba(253, 251, 247, 0.9); /* 导航栏：米色半透明 */
    
    --text-color: #4a403a;          /* 文字：深褐灰色 (不要纯黑) */
    --text-light: #8c8077;          /* 浅色文字：灰咖色 */
    
    --border-color: #e6e0d8;        /* 边框：浅米灰 */
    --dashed-line: #d1c7bc;         /* 虚线：深米灰 */
    
    /* 渐变色：更加柔和的棕色渐变 */
    --accent-gradient: linear-gradient(135deg, #a68a64, #d4b483);
}

body.dark-mode {
    /* --- 深色模式 (夜间：黑巧+金棕色) --- */
    --primary-color: #d4b483;       /* 主色调：金棕色 */
    --secondary-color: #e6c9a3;     
    
    --bg-color: #2c2420;            /* 背景：深黑巧色 */
    --card-bg: #382e29;             /* 卡片：浅黑巧 */
    --nav-bg: rgba(44, 36, 32, 0.9);
    
    --text-color: #e8e0d5;          /* 文字：米白 */
    --text-light: #aca095;
    
    --border-color: #4a3e36;
    --dashed-line: #5c4f45;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    /* 核心字体修改：正文用无衬线，标题用衬线 */
    font-family: 'Noto Sans SC', system-ui, -apple-system, sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    transition: background-color 0.4s ease, color 0.3s ease;
    padding-top: 60px;
    overflow-x: hidden;
    line-height: 1.7; /* 增加行高，阅读更舒适 */
}

/* --- 特殊字体设置 (让标题更优雅) --- */
h1, h2, h3, .hero-title, .detail-title, .cat-en {
    font-family: 'Noto Serif SC', 'Times New Roman', serif; /* 标题使用衬线体 */
    font-weight: 700;
}

/* 保持手写字体不变 */
.story-card p { 
    font-family: 'Dancing Script', cursive; 
}

/* =========================================
   2. 导航栏 (Navigation)
   ========================================= */
nav {
    position: fixed; top: 0; left: 0; width: 100%; height: 60px;
    background-color: var(--nav-bg);
    backdrop-filter: blur(10px); /* 磨砂玻璃效果 */
    display: flex; justify-content: flex-end; align-items: center;
    padding: 0 40px; z-index: 1000;
    border-bottom: 1px solid var(--border-color);
}

.nav-right { display: flex; align-items: center; gap: 25px; }
.nav-links { list-style: none; display: flex; gap: 20px; }

/* 导航链接下划线动画 */
.nav-links a {
    position: relative;
    text-decoration: none;
    color: var(--text-color);
    font-weight: 500;
    font-size: 0.95rem;
    padding-bottom: 5px;
    transition: color 0.3s;
}

.nav-links a::after {
    content: ''; position: absolute; left: 0; bottom: 0;
    width: 0; height: 3px; 
    background-color: var(--primary-color);
    border-radius: 2px; 
    transition: width 0.3s ease;
}

.nav-links a:hover::after, 
.nav-links a.active::after { width: 100%; }

.nav-links a:hover, 
.nav-links a.active { color: var(--primary-color); }

/* --- 深色模式开关组件 --- */
.theme-control-group { display: flex; align-items: center; gap: 10px; }

.switch { position: relative; display: inline-block; width: 50px; height: 26px; margin-right: 5px; }
.switch input { opacity: 0; width: 0; height: 0; position: absolute; }

.slider {
    position: absolute; cursor: pointer;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: #cbd5e1; 
    transition: .4s; border-radius: 34px;
}

.slider:before {
    position: absolute; content: ""; 
    height: 18px; width: 18px;
    left: 4px; bottom: 4px; 
    background-color: white;
    transition: .4s; border-radius: 50%;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

input:checked + .slider { background-color: var(--primary-color); }
input:checked + .slider:before { transform: translateX(24px); }

/* 右侧图标旋转动画 */
.theme-icon-display { 
    font-size: 1.2rem; width: 24px; text-align: center; 
    transition: transform 0.5s; cursor: default; 
}
body.dark-mode .theme-icon-display { transform: rotate(360deg); }


/* =========================================
   3. 核心布局结构 (Layout)
   ========================================= */
/* 双栏布局容器 (主页、项目、经验、联系) */
/* --- style.css 修改：布局容器 --- */
.layout-container {
    max-width: 1100px; 
    margin: 0 auto; 
    padding: 0 20px 60px;
    
    display: flex; 
    gap: 50px; 
    
    /* ★ 必须改为 flex-start (顶部对齐) */
    /* 这样我们才能用 margin 手动控制它的位置 */
    align-items: flex-start; 
}

/* 单栏居中容器 (其他/生活页面) */
.single-column-container {
    max-width: 1000px; margin: 0 auto; padding: 0 20px 60px;
}

/* --- style.css 修改：侧边栏与独立卡片布局 --- */

/* 1. 侧边栏容器 (Sticky Column) */
/* --- style.css 修改：侧边栏 (取消悬浮，随页面滚动) --- */

/* --- style.css 修改：侧边栏 --- */
.sidebar {
    width: 280px; 
    flex-shrink: 0;
    
    position: relative; /* 保持相对定位，不悬浮 */
    
    /* ★ 核心修改：手动设置垂直居中位置 */
    /* 这里的 35vh 意味着让卡片顶部距离屏幕顶端大约 1/3 的位置 */
    /* 你可以调整这个数字：数值越大，卡片越靠下 */
    margin-top: 15vh; 
    
    display: flex;
    flex-direction: column;
    gap: 20px; 
}

/* 手机端适配：取消这个巨大的上边距 */
@media (max-width: 768px) {
    .sidebar {
        width: 100%;
        margin-top: 0; /* 手机上不要留白，直接顶头显示 */
        margin-bottom: 40px;
    }
}

/* 2. 新的通用侧边栏卡片样式 */
.sidebar-card {
    background: var(--card-bg);
    border-radius: 20px;
    padding: 25px 20px;
    text-align: center;
    border: 1px solid var(--border-color);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    transition: transform 0.3s, box-shadow 0.3s;
}

.sidebar-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
    border-color: var(--primary-color);
}

/* 3. 卡片内部元素微调 */

/* 头像 */
.avatar {
    width: 80px; height: 80px; /*稍微改小一点点，更精致*/
    border-radius: 50%;
    object-fit: cover;
    margin: 0 auto 15px;
    box-shadow: 0 6px 15px rgba(166, 138, 100, 0.3);
    display: block;
}

/* 名字与签名 */
.sidebar-card h3 { 
    font-size: 1.3rem; margin-bottom: 8px; font-family: 'Noto Serif SC', serif; 
}
.signature { 
    font-size: 0.85rem; color: var(--text-light); font-style: italic; 
}

/* 音乐播放器 */
.music-player { 
    width: 100%; height: 32px; border-radius: 16px; 
    /* 调整播放器颜色以适应浅色主题 */
    filter: sepia(20%) opacity(0.9);
}

/* 信息行 (卡片3) */
.info-row {
    display: flex;
    align-items: center;
    justify-content: flex-start; /* 左对齐 */
    gap: 12px;
    margin-bottom: 10px;
    font-size: 0.9rem;
    color: var(--text-light);
    padding: 0 10px; /* 稍微往里缩一点 */
}
.info-row:last-child { margin-bottom: 0; }
.info-row span:first-child { font-size: 1.1rem; } /* 图标稍微大点 */


/* 4. 确保右侧内容居中且自适应 */
.layout-container {
    max-width: 1100px; 
    margin: 0 auto; 
    padding: 0 20px 60px;
    
    display: flex; 
    gap: 50px; /* 侧边栏和内容的间距 */
    align-items: flex-start; /* 顶部对齐 */
}

.content-area {
    flex: 1; /* 占满剩余空间 */
    min-width: 0; /* 防止内容溢出 */
}

/* 移动端适配：侧边栏卡片改为横向排列或堆叠 */
@media (max-width: 768px) {
    .sidebar {
        width: 100%;
        position: relative; 
        top: 0;
        flex-direction: column; /* 手机上依然竖排，或者可以改成 row 横排 */
        margin-bottom: 40px;
    }
    
    /* 如果想在手机上把三个卡片横着排，可以用这个 (可选) */
    /*
    .sidebar {
        flex-direction: row;
        overflow-x: auto;
        padding-bottom: 10px;
    }
    .sidebar-card {
        min-width: 200px;
    }
    */
}

/* --- style.css 修改后的头像样式 --- */

.avatar {
    width: 90px;
    height: 90px;
    border-radius: 50%; /* 保持圆形 */
    object-fit: cover;  /* 关键：保证图片不变形地填满圆形区域 */
    margin: 0 auto 15px; /* 保持居中和下边距 */
    box-shadow: 0 6px 15px rgba(37, 99, 235, 0.2); /* 保持阴影 */
    display: block; /* 图片默认是行内元素，设为块级更好控制 */
    
    /* 可选：如果你想给头像加一个细边框，可以取消下面这行的注释 */
    border: 3px solid var(--card-bg);
}

.profile-card h3 { font-size: 1.4rem; margin-bottom: 5px; }
.signature { font-size: 0.85rem; color: var(--text-light); font-style: italic; }

.divider-dashed {
    height: 1px;
    background-image: linear-gradient(to right, transparent 0%, var(--dashed-line) 50%, transparent 100%);
    background-size: 8px 1px; background-repeat: repeat-x; margin: 15px 0;
}

.music-label { font-size: 0.85rem; color: var(--text-light); margin-bottom: 8px; text-align: left; }
.music-player { width: 100%; height: 32px; border-radius: 16px; }
.card-bottom p { font-size: 0.9rem; color: var(--text-light); margin-bottom: 6px; }

/* 右侧内容区域 */
.content-area { flex: 1; min-width: 0; }

/* Hero Section (大字欢迎区) */
.hero-section {
    min-height: 90vh;
    height: calc(100vh - 60px); /* 占满一屏 */
    display: flex; flex-direction: column; justify-content: center; align-items: flex-start;

}

.hero-title {
    font-size: 4rem; font-weight: 800; line-height: 1.1; margin-bottom: 20px;
    background: var(--accent-gradient); -webkit-background-clip: text; color: transparent;
}
.hero-subtitle { font-size: 1.3rem; color: var(--text-light); margin-bottom: 35px; }

.portfolio-tag {
    font-size: 1rem; font-weight: 400; letter-spacing: 2px;
    color: var(--primary-color); margin-bottom: 5px; text-transform: uppercase;
}

/* 滚动按钮 (反色效果) */
.scroll-btn {
    padding: 10px 28px; font-size: 0.95rem;
    background: var(--text-color); /* 背景=文字色 */
    color: var(--bg-color);        /* 文字=背景色 */
    border: none; border-radius: 50px; 
    cursor: pointer; transition: transform 0.2s; 
    font-weight: 500; text-decoration: none; display: inline-block;
}
.scroll-btn:hover { transform: translateY(3px); }


/* =========================================
   4. 通用内容组件 (Cards & Grids)
   ========================================= */
/* 章节标题 */
.section-header {
    display: flex; align-items: center; margin: 50px 0 25px;
    color: var(--text-light); font-weight: 600; letter-spacing: 1px;
}
.section-header .title { margin-right: 15px; white-space: nowrap; }
.section-header .line { flex: 1; border-bottom: 1px dashed var(--dashed-line); margin-right: 15px; }
.section-header .number { font-family: monospace; opacity: 0.7; }

/* 通用内容卡片 */
.content-card {
    background: var(--card-bg); border-radius: 16px;
    border: 1px solid var(--border-color); padding: 25px;
    transition: transform 0.3s, box-shadow 0.3s;
}
.content-card:hover { 
    transform: translateY(-3px); 
    box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.05); 
}

/* 动画类 */
.animate-box { opacity: 0; transform: translateY(20px); transition: all 0.6s ease-out; }
.animate-box.visible { opacity: 1; transform: translateY(0); }

/* --- 首页特定组件 --- */
.stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
.stat-card { text-align: center; padding: 15px; }
.stat-top { font-size: 0.9rem; color: var(--text-light); font-weight: 500; }
.stat-num { font-size: 2rem; font-weight: 700; color: var(--primary-color); }

.story-card p { 
    font-family: 'Dancing Script', cursive; font-size: 1.6rem; 
    line-height: 1.6; color: var(--text-color); text-align: center; 
}

.video-container { width: 100%; border-radius: 16px; overflow: hidden; border: 1px solid var(--border-color); }
.video-player { width: 100%; display: block; }

.skills-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; }
.skill-card { padding: 20px 15px; }
.skill-icon { font-size: 1.8rem; display: block; margin-bottom: 10px; }
.skill-title { font-size: 1rem; font-weight: 700; margin-bottom: 5px; }
.skill-details { font-size: 0.75rem; color: var(--text-light); line-height: 1.4; }

.salary-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
.salary-card { display: flex; flex-direction: column; min-height: 180px; }
.salary-top { text-align: center; padding-bottom: 5px; }
.salary-bottom { flex: 1; display: flex; align-items: center; justify-content: center; }
.salary-range { font-size: 1.4rem; font-weight: 700; color: var(--secondary-color); }

.teacher-card { text-align: center; padding: 40px; }
.teacher-img {
    width: 120px; height: 120px; border-radius: 50%; object-fit: cover;
    border: 4px solid var(--bg-color); box-shadow: 0 8px 20px rgba(0,0,0,0.1); margin-bottom: 20px;
}
.teacher-quote { font-style: italic; color: var(--text-light); max-width: 80%; margin: 0 auto; line-height: 1.6; }

footer { text-align: center; padding: 40px 0; color: var(--text-light); font-size: 0.9rem; }


/* =========================================
   5. 项目页面 (Projects)
   ========================================= */
.project-gallery { display: grid; grid-template-columns: repeat(2, 1fr); gap: 25px; }

.project-item {
    position: relative; border-radius: 16px; overflow: hidden;
    cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.1); border: 1px solid var(--border-color);
}
.project-thumb {
    width: 100%; height: 220px; object-fit: cover;
    display: block; transition: transform 0.4s ease;
}
.project-item:hover .project-thumb { transform: scale(1.08); }

.project-overlay {
    position: absolute; bottom: 0; left: 0; width: 100%; padding: 15px;
    background: rgba(0, 0, 0, 0.75); color: white;
    transform: translateY(100%); transition: transform 0.3s ease-in-out;
    text-align: center; font-size: 1rem; font-weight: 500;
}
.project-item:hover .project-overlay { transform: translateY(0); }

/* --- 项目详情页 (磨砂玻璃大卡片) --- */
.glass-detail-card {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(12px); border-radius: 20px; padding: 40px;
    border: 1px solid var(--border-color); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}
body.dark-mode .glass-detail-card { background: rgba(30, 41, 59, 0.85); }

.detail-title { font-size: 2rem; font-weight: bold; margin-bottom: 20px; color: var(--text-color); }
.detail-media-container { margin-top: 30px; display: flex; flex-direction: column; gap: 20px; }
.detail-video { width: 100%; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
.detail-img { width: 100%; border-radius: 12px; border: 1px solid var(--border-color); transition: transform 0.3s; }
.detail-img:hover { transform: scale(1.02); }


/* =========================================
   6. 经验页面 (Experience - Bento Grid)
   ========================================= */
/* 技能条网格 */
.skill-group-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 25px; }

.skill-bar-item { margin-bottom: 15px; }
.skill-bar-item:last-child { margin-bottom: 0; }
.skill-info { display: flex; justify-content: space-between; font-size: 0.9rem; margin-bottom: 5px; font-weight: 600; }

.progress-track {
    width: 100%; height: 8px;
    background-color: #e2e8f0; border-radius: 4px; overflow: hidden;
}
.progress-fill {
    height: 100%; background: var(--accent-gradient);
    width: 0; /* JS动画控制 */
    border-radius: 4px; transition: width 1.5s cubic-bezier(0.22, 0.61, 0.36, 1);
}
.animate-box.visible .progress-fill { width: var(--w); }

/* 办公技能图标 */
.office-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
.office-item { display: flex; align-items: center; gap: 15px; padding: 20px; }
.office-icon {
    width: 40px; height: 40px; border-radius: 50%;
    background: rgba(37, 99, 235, 0.1); color: var(--primary-color);
    display: flex; align-items: center; justify-content: center;
    font-size: 1.2rem; flex-shrink: 0;
}

/* Bento Grid 经历卡片 */
.timeline-container {
    display: grid; grid-template-columns: repeat(2, 1fr); gap: 25px; padding: 20px 0;
}

.timeline-card {
    height: 100%; display: flex; flex-direction: column; justify-content: flex-start;
    background: var(--card-bg); border-radius: 20px; padding: 30px;
    border: 1px solid var(--border-color); box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    transition: all 0.3s ease; position: relative; overflow: hidden;
}
.timeline-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 30px rgba(0,0,0,0.1); border-color: var(--primary-color);
}
.timeline-card::before {
    content: ''; position: absolute; top: -50px; right: -50px;
    width: 100px; height: 100px; background: var(--accent-gradient);
    opacity: 0.05; border-radius: 50%; transition: transform 0.5s;
}
.timeline-card:hover::before { transform: scale(1.5); }

.time-badge {
    display: inline-block; background: rgba(37, 99, 235, 0.1); color: var(--primary-color);
    padding: 6px 14px; border-radius: 30px; font-size: 0.85rem; font-weight: 700;
    margin-bottom: 15px; width: fit-content;
}
.timeline-card h3 { font-size: 1.3rem; margin-bottom: 5px; color: var(--text-color); }
.org-name { font-size: 0.95rem; color: var(--text-light); margin-bottom: 15px; font-weight: 500; }
.timeline-desc { font-size: 0.95rem; line-height: 1.7; color: var(--text-color); opacity: 0.9; flex-grow: 1; }


/* =========================================
   7. 联系页面 (Contact)
   ========================================= */
.contact-info-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 25px; margin-bottom: 40px; }
.contact-item { display: flex; align-items: center; gap: 15px; margin-bottom: 12px; font-size: 0.95rem; }
.contact-item:last-child { margin-bottom: 0; }
.contact-icon { color: var(--primary-color); font-size: 1.2rem; width: 24px; text-align: center; }

.contact-form-card {
    background: var(--card-bg); border-radius: 20px; padding: 30px;
    border: 1px solid var(--border-color); box-shadow: 0 5px 15px rgba(0,0,0,0.05);
}
.form-group { margin-bottom: 20px; }

.form-input, .form-textarea {
    width: 100%; padding: 15px; background-color: var(--bg-color);
    border: 1px solid var(--border-color); border-radius: 12px;
    font-family: inherit; font-size: 1rem; color: var(--text-color);
    transition: all 0.3s; outline: none;
}
.form-input:focus, .form-textarea:focus {
    border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    background-color: var(--card-bg);
}
.form-textarea { resize: vertical; min-height: 150px; }

.submit-btn {
    width: 100%; padding: 15px; background: var(--accent-gradient);
    color: white; border: none; border-radius: 12px;
    font-size: 1rem; font-weight: bold; cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
}
.submit-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(37, 99, 235, 0.3); }


/* =========================================
   8. 其他/生活页面 (Others)
   ========================================= */
.hero-big-card {
    /* 如需保留卡片风格可启用，目前使用纯文字风格 */
    background: var(--card-bg); border-radius: 24px; padding: 60px 20px;
    text-align: center; border: 1px solid var(--border-color);
    box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.1); margin-bottom: 50px;
}

.category-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
.category-card-text {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    padding: 30px 10px; cursor: default; transition: transform 0.3s, border-color 0.3s;
}
.category-card-text:hover { transform: translateY(-5px); border-color: var(--primary-color); }

.cat-en {
    font-size: 1.5rem; font-weight: 800; color: var(--primary-color);
    margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px;
}
.cat-cn { font-size: 1rem; color: var(--text-light); font-weight: 500; }

.photo-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
.photo-item {
    position: relative; border-radius: 16px; overflow: hidden;
    aspect-ratio: 4/3; box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    border: 1px solid var(--border-color);
}
.photo-img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s ease; }
.photo-item:hover .photo-img { transform: scale(1.1); }


/* =========================================
   9. 移动端适配 (Responsive)
   ========================================= */
@media (max-width: 768px) {
    .layout-container { flex-direction: column; align-items: center; }
    .sidebar { width: 100%; position: relative; margin-top: 0; top: 0; order: 2; }
    .content-area { order: 1; text-align: center; }
    .hero-section { align-items: center; }
    
    /* 强制网格变单列 */
    .stats-grid, .skills-grid, .salary-grid, 
    .project-gallery, .skill-group-grid, 
    .office-grid, .timeline-container, 
    .contact-info-grid, .category-grid, .photo-grid { 
        grid-template-columns: 1fr; 
    }
}
/* --- style.css 新增：背景律动画布 --- */
/* --- style.css 修改：脊柱律动条 (竖线+双向延申) --- */
/* --- style.css 修改 --- */
#rhythm-canvas {
    position: fixed;
    top: 0;
    
    /* ★ 改动 1：从 right 改为 left，并设置距离 */
    left: 40px; 
    right: auto; /* 清除右侧定位 */
    
    /* ★ 改动 2：加宽画布，这样折线才能甩得更开 */
    width: 300px; 
    height: 100%;
    
    z-index: -1;
    pointer-events: none;
    opacity: 0.8;
}
/* --- style.css 修改：开幕转场 (浅色版) --- */

#intro-curtain {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    z-index: 9999;
    
    /* ★ 修改点：改为使用背景色变量 (即浅色) */
    /* 这样一开始就是米色背景，深色文字 */
    background-color: var(--bg-color); 
    color: var(--text-color);
    
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    
    /* 动画过渡 */
    transition: all 1.2s cubic-bezier(0.77, 0, 0.175, 1);
    
    /* 初始底部是平的 */
    border-radius: 0;
    overflow: hidden;

    /* ★ 建议：加一个阴影 */
    /* 因为背景和网页内容都是浅色，加个阴影能让向上拉起时更有层次感 */
    box-shadow: 0 10px 30px rgba(0,0,0,0.1); 
}

/* 深色模式适配 */
/* --- style.css 修复：开幕转场 (强制保持浅色) --- */

#intro-curtain {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100vh;
    z-index: 9999;
    
    /* ★ 核心修复：使用 !important 强制锁定为浅色背景 */
    /* 无论 body 是深是浅，这里永远是米色背景 + 深色文字 */
    background-color: #fdfbf7 !important; 
    color: #4a403a !important;
    
    display: flex; justify-content: center; align-items: center; text-align: center;
    transition: all 1.2s cubic-bezier(0.77, 0, 0.175, 1);
    
    /* 阴影 */
    box-shadow: 0 10px 30px rgba(0,0,0,0.1); 
    
    border-radius: 0; overflow: hidden;
}

/* --- style.css 修改：开幕转场 (带背景滚动文字版) --- */

#intro-curtain {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100vh;
    z-index: 9999;
    /* 强制浅色背景 */
    background-color: #fdfbf7 !important; 
    color: #4a403a !important;
    /* 注意：这里去掉了 justify-content 和 align-items，改用内部元素定位 */
    display: block; 
    transition: all 1.2s cubic-bezier(0.77, 0, 0.175, 1);
    box-shadow: 0 10px 30px rgba(0,0,0,0.1); 
    border-radius: 0; overflow: hidden;
}

/* === 核心修改 1：提升主要内容的层级 === */
.curtain-content {
    position: absolute; /* 绝对定位，居中 */
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    z-index: 10; /* 关键：层级比背景文字高 */
    
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    transition: opacity 0.5s ease, transform 0.5s ease;
}

/* === 核心修改 2：背景滚动文字层样式 === */
.marquee-background {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    z-index: 1; /* 层级较低，在内容后面 */
    
    display: flex;
    flex-direction: column;
    justify-content: space-between; /* 三行纵向分布撑满 */
    padding: 5vh 0; /* 上下留点空隙 */
    opacity: 0.15; /* 降低透明度，作为背景纹理，不抢戏 */
    pointer-events: none; /* 让鼠标穿透，不影响点击按钮 */
}

.marquee-row {
    width: 100%;
    overflow: hidden; /* 隐藏超出屏幕的文字 */
    white-space: nowrap; /* 强制一行显示 */
}

/* 镂空文字样式 */
/* --- style.css 修改 --- */

/* 1. 修改镂空文字基础样式 (调整字体大小) */
.marquee-track span {
    font-family: 'Noto Sans SC', sans-serif;
    font-weight: 900;
    /* 将字体从 18vh 调整为 16vh，以适应4行排版 */
    font-size: 16vh; 
    line-height: 1;
    text-transform: uppercase;
    display: inline-block;
    
    /* 基础状态：镂空 */
    color: transparent;
    -webkit-text-stroke: 3px #4a403a;
}

/* 2. 新增规则：处理实心单词 */
/* 选中 span 内部的 b 标签 */
.marquee-track span b {
    /* 设置为深褐色实心填充 */
    color: #4a403a; 
    /* 去掉描边 (可选，不去掉也可以，填充满了就看不出了) */
    -webkit-text-stroke: 0; 
    font-weight: inherit; /* 继承父级的粗体 */
}

/* 滚动轨道容器 */
.marquee-track {
    display: inline-block;
    white-space: nowrap;
    /* 确保两个span紧挨着 */
    font-size: 0; 
}

/* --- 动画定义 --- */
/* 向左滚动动画 */
@keyframes marquee-left {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); } /* 移动一半距离，实现无缝循环 */
}
/* 向右滚动动画 */
@keyframes marquee-right {
    0% { transform: translateX(-50%); }
    100% { transform: translateX(0); }
}

/* 应用动画 */
.scroll-left .marquee-track {
    animation: marquee-left 30s linear infinite;
}
.scroll-right .marquee-track {
    animation: marquee-right 35s linear infinite; /* 稍微慢点，制造错落感 */
}

/* --- 保持原有的动画状态和内部元素样式 --- */
#intro-curtain.slide-up {
    height: 0; opacity: 1; 
    border-bottom-left-radius: 50% 20%;
    border-bottom-right-radius: 50% 20%;
}
#intro-curtain.slide-up .curtain-content {
    opacity: 0; transform: translateY(-50px);
}

/* 确保之前的字体和按钮样式还在 */
.curtain-title {
    font-family: 'Noto Serif SC', serif; font-size: 3.5rem; font-weight: 700; margin-bottom: 20px; line-height: 1.2;
}
.curtain-subtitle {
    font-family: 'Noto Sans SC', sans-serif; font-size: 1.1rem; font-weight: 400; letter-spacing: 2px; margin-bottom: 40px; opacity: 0.8; text-transform: uppercase;
}
.curtain-btn {
    font-family: 'Noto Sans SC', sans-serif; font-weight: 600; letter-spacing: 1px; padding: 14px 36px; background: transparent; border: 1px solid #4a403a; color: #4a403a; border-radius: 50px; font-size: 1rem; cursor: pointer; transition: all 0.3s;
}
.curtain-btn:hover { background: #4a403a; color: #fdfbf7; transform: translateY(-2px); }
/* --- style.css 新增：左侧静态竖线 --- */
#left-line {
    position: fixed;
    top: 0;
    
    /* 位置：根据你侧边栏的位置，放在大概 80px 处比较合适 */
    left: 80px; 
    
    width: 2px; /* 线条宽度 */
    height: 100vh; /* 全高 */
    
    /* 颜色：使用主题变量，自动适配深浅模式 */
    background-color: var(--primary-color);
    
    /* 发光效果 */
    box-shadow: 0 0 15px var(--primary-color);
    
    opacity: 0.6; /* 透明度 */
    z-index: -1; /* 置于底层 */
    pointer-events: none;
}
/* --- style.css 修改：完整结构的巨型几何小人 --- */

#geo-man {
    position: fixed;
    /* 初始隐藏在屏幕下方，需要更深，因为现在它更高了 */
    bottom: -600px; 
    
    /* 位置：左侧竖线(80px)旁边 */
    left: 120px; 
    right: auto; 
    
    /* 整体容器尺寸 (用于占位) */
    width: 280px;
    height: 450px; 
    
    z-index: 50; 
    transition: bottom 1s cubic-bezier(0.34, 1.56, 0.64, 1); 
    pointer-events: none; /* 鼠标穿透 */
}

/* 激活状态：浮上来 */
#geo-man.active {
    bottom: 50px;
}

/* 整体悬浮动画容器 */
.character-animator {
    position: relative;
    width: 100%;
    height: 100%;
    /* 应用悬浮动画 */
    animation: floatAnim 4s ease-in-out infinite;
}

/* =========================================
   SVG 小人容器样式 (仅保留布局与容器动画)
   ========================================= */

/* 1. 外层容器：负责定位 */
#geo-man {
    position: fixed;
    bottom: -500px;
    left: 80px;
    width: 360px;
    height: auto;
    z-index: 50;
    transition: bottom 1s cubic-bezier(0.34, 1.56, 0.64, 1);
    pointer-events: none;
    perspective: 1000px;
}
#geo-man.active { bottom: 10px; }

/* 2. SVG本体：负责整体上下漂浮 */
.man-svg {
    width: 100%; 
    height: auto; 
    display: block;
    filter: drop-shadow(0 10px 8px rgba(0,0,0,0.3));
    /* 这个整体漂浮动画还是留在这里比较好，控制整个图片的动效 */
    animation: floatAnim 6s ease-in-out infinite;
    transform-style: preserve-3d;
}

@keyframes floatAnim {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}
/* =========================================
   修复版：随机行为动画定义 (JS触发版)
   ========================================= */

/* 1. 关键修复：杯子的默认位置 */
/* 必须设置默认 transform，否则动画结束后它会弹回 (0,0) */
.coffee-cup-group {
    transform: translate(140px, 200px) rotate(0deg);
    transition: transform 0.3s ease; /* 加个过渡，位置修正更平滑 */
}

/* --- 左手：喝水 (动作时长 4s) --- */
@keyframes armMorphOneShot {
    /* 起点：放下状态 */
    0% { d: path("M 110,140 Q 80,220 140,200"); }
    /* 中间：喝水状态 */
    40%, 60% { d: path("M 110,140 Q 40,140 155,125"); }
    /* 终点：放下状态 */
    100% { d: path("M 110,140 Q 80,220 140,200"); }
}

@keyframes cupFollowOneShot {
    /* 必须与 .coffee-cup-group 的默认 transform 一致 */
    0% { transform: translate(140px, 200px) rotate(0deg); }
    40%, 60% { transform: translate(155px, 125px) rotate(-30deg); }
    100% { transform: translate(140px, 200px) rotate(0deg); }
}

/* 激活喝水的类 (JS添加) */
.action-drink { 
    animation: armMorphOneShot 4s ease-in-out forwards; 
}
.action-drink-cup { 
    /* 动画运行时禁用 transition，防止冲突 */
    animation: cupFollowOneShot 4s ease-in-out forwards; 
    transition: none; 
}


/* --- 右手：挠头 (动作时长 2.5s) --- */
@keyframes scratchHeadFast {
    /* 起点：放下状态 */
    0% { d: path("M 190,140 Q 220,140 240,240"); } 
    
    20% { d: path("M 190,140 Q 260,50 160,40"); }  /* 抬手 */
    
    /* 快速挠头循环 */
    30% { d: path("M 190,140 Q 265,55 170,45"); }
    40% { d: path("M 190,140 Q 260,50 160,40"); }
    50% { d: path("M 190,140 Q 265,55 170,45"); }
    60% { d: path("M 190,140 Q 260,50 160,40"); }
    70% { d: path("M 190,140 Q 265,55 170,45"); }
    
    80% { d: path("M 190,140 Q 260,50 160,40"); }  /* 停顿 */
    
    /* 终点：放下状态 */
    100% { d: path("M 190,140 Q 220,140 240,240"); } 
}

/* 激活挠头的类 */
.action-scratch { 
    animation: scratchHeadFast 2.5s ease-in-out forwards; 
}